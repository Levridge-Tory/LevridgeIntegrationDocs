



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.3">
    
    
      
        <title>Logging Settings - Levridge Integration Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#logging-settings" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Levridge Integration Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Levridge Integration Documentation
            </span>
            <span class="md-header-nav__topic">
              
                Logging Settings
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/LevridgeSoftware/LevridgeSoftware.github.io/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    LevridgeSoftware.github.io
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." class="md-tabs__link md-tabs__link--active">
        Home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../Integration-Overview/" class="md-tabs__link">
          Integrations
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../Deploying-Integration-Framework/" class="md-tabs__link">
          Deployment
        </a>
      
    </li>
  

      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="Levridge Integration Documentation" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Levridge Integration Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/LevridgeSoftware/LevridgeSoftware.github.io/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    LevridgeSoftware.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Integrations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Integrations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Integration-Overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../D365-CRM-to-D365-F&O/" title="D365 CRM to D365 F&O" class="md-nav__link">
      D365 CRM to D365 F&O
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../D365-F&O-to-D365-CRM/" title="D365 F&O to D365 CRM" class="md-nav__link">
      D365 F&O to D365 CRM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../scale-integration/" title="Levridge Scale House" class="md-nav__link">
      Levridge Scale House
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Agsync/" title="Agsync" class="md-nav__link">
      Agsync
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Kahler/" title="Kahler" class="md-nav__link">
      Kahler
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Surety/" title="Surety" class="md-nav__link">
      Surety
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../oneWeigh/" title="oneWeigh" class="md-nav__link">
      oneWeigh
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Field-Reveal/" title="Field Reveal" class="md-nav__link">
      Field Reveal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../IntegratingCustomFields/" title="Integrating Custom Fields" class="md-nav__link">
      Integrating Custom Fields
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Deployment
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Deployment
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Deploying-Integration-Framework/" title="Deploying the Integration Framework" class="md-nav__link">
      Deploying the Integration Framework
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ApplicationConfiguration/" title="Application Settings Configuration" class="md-nav__link">
      Application Settings Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../DeployingCustomFieldMappingAssemblies/" title="Deploying Custom Field Mapping Assemblies" class="md-nav__link">
      Deploying Custom Field Mapping Assemblies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../DeployingCDS/" title="Deploying CDS" class="md-nav__link">
      Deploying CDS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../print-service/" title="Print Service" class="md-nav__link">
      Print Service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-6" type="checkbox" id="nav-3-6">
    
    <label class="md-nav__link" for="nav-3-6">
      CRM Platform
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-6">
        CRM Platform
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../CRM-configuration/" title="CRM Platform Configuration" class="md-nav__link">
      CRM Platform Configuration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../about/" title="About" class="md-nav__link">
      About
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/LevridgeSoftware/LevridgeSoftware.github.io/edit/master/docs/Logging.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="logging-settings"><a class="toclink" href="#logging-settings">Logging Settings</a></h1>
<p>This document describes how to configure logging for the Levridge Integration Framework</p>
<h1 id="overview"><a class="toclink" href="#overview">Overview</a></h1>
<p>The Levridge Integration Framework utilizes the standard <a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/logging/?view=aspnetcore-3.1">ASP.NET Core logging</a> capabilities.
Our primary target for logging is <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview">Azure Application Insights</a> however
we can also log to the Windows Event Log. This can be usefull if the integration framework is running as a windows service
and does not have highspeed internet access to send log data to Application Insights.</p>
<h1 id="log-settings"><a class="toclink" href="#log-settings">Log Settings</a></h1>
<p>In the appsettings.json file there is a "Logging" section that defines the log settings for the various
logging providers.</p>
<p>A typical logging section may look like this.</p>
<pre><code>"Logging": {
    "ApplicationInsights": {
        "LogLevel": {
            "Default": "Trace"
        }
    },
    "Debug": {
        "LogLevel": {
            "Default": "Trace"
        }
    },
    "Console": {
        "IncludeScopes": true,
        "LogLevel": {
            "Default": "Trace"
        }
    },
    "LogLevel": {
        "Default": "Warning"
    }
},
</code></pre>
<p>Unless you are using Debug or Console logging the only setting you need to be concerned with is the
ApplicationInsights object. In a typical production environment you will want this set to "Information" or 
"Warning" rather than trace. However, to troubleshoot issues you may need to set this to "Trace".</p>
<h2 id="valid-log-levels"><a class="toclink" href="#valid-log-levels">Valid Log Levels</a></h2>
<p>Here are the valid log level settings:</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Trace</td>
<td>Logs that contain the most detailed messages. These messages may contain sensitive application data. These messages are disabled by default and should never be enabled in a production environment.</td>
</tr>
<tr>
<td>Debug</td>
<td>Logs that are used for interactive investigation during development. These logs should primarily contain information useful for debugging and have no long-term value.</td>
</tr>
<tr>
<td>Information</td>
<td>Logs that track the general flow of the application. These logs should have long-term value.</td>
</tr>
<tr>
<td>Warning</td>
<td>Logs that highlight an abnormal or unexpected event in the application flow, but do not otherwise cause the application execution to stop.</td>
</tr>
<tr>
<td>Error</td>
<td>Logs that highlight when the current flow of execution is stopped due to a failure. These should indicate a failure in the current activity, not an application-wide failure.</td>
</tr>
<tr>
<td>Critical</td>
<td>Logs that describe an unrecoverable application or system crash, or a catastrophic failure that requires immediate attention.</td>
</tr>
<tr>
<td>None</td>
<td>Not used for writing log messages. Specifies that a logging category should not write any messages.</td>
</tr>
</tbody>
</table>
<h3 id="levridge-guidance-for-using-log-levels"><a class="toclink" href="#levridge-guidance-for-using-log-levels">Levridge Guidance for using Log Levels</a></h3>
<p>In order to provide a consistent user experience when using the configuration to adjust the log levels 
we need to have a consistent practice accross all of our code for what information is logged at what level.</p>
<p>Generally speaking we would like to have logging set to Information in production unless there is a need
to troubleshoot a specific issue. At this level we should be able to see all errors and warnings along with
usefull information for basic troubleshooting.</p>
<p>Here is what Levridge is logging at the different levels:</p>
<h4 id="trace"><a class="toclink" href="#trace">Trace</a></h4>
<p>Log variable states, parameters &amp; request and response payloads as Trace items.
Use trace to log verbose information and large payloads. These items may can cause performance issues 
during normal operation.</p>
<h3 id="debug"><a class="toclink" href="#debug">Debug</a></h3>
<p>Log any information that inidates the basic flow of the code.
Examples include something like "Entering POST method" or "Enabling authentication."</p>
<p>This is general information that helps someone follow the flow of the code and can be useful in determining
what is happening when an error occures.</p>
<h3 id="information"><a class="toclink" href="#information">Information</a></h3>
<p>Log specific state information. For example "Recieved Order 1234" or "Enabling AzureAd authentication scheme." 
These messages provide specific instance and state information. For example, in the trace section we showed an 
example "Enabling authenticaction". The represents the current code that is executing but not any instance or 
state information. On the other hand, logging "Enabling AzureAd authentication scheme" tells us which type of 
authenticaion is being enabled.</p>
<h3 id="warning"><a class="toclink" href="#warning">Warning</a></h3>
<p>Log abnormal situations that do not warrent stopping the application and do not leave the application 
in an unkown state.</p>
<h3 id="error"><a class="toclink" href="#error">Error</a></h3>
<p>Log error conditions from which we can recover.</p>
<h3 id="critical"><a class="toclink" href="#critical">Critical</a></h3>
<p>Log all exceptions as critical. Include as much state information as possible to help with troubleshooting 
the root cause of the exception.</p>
<h2 id="application-insights-instrumentation-key"><a class="toclink" href="#application-insights-instrumentation-key">Application Insights Instrumentation Key</a></h2>
<p>Application Insights uses an Intrumentation Key to specify the Application Insights resource to use for logging.
If the integration framework is deployed to Azure and Application Insights is enabled, the Instrumentation Key 
will be specified in the environment variables. However, if the Integration is deployed on premise an Instrumentation Key
must be specified for the Application Insights logging provider to send the log data to the correct Application Insights
resource.</p>
<pre><code>"ApplicationInsights": {
    "InstrumentationKey": "[Application Insights Instrumentation Key]"
},
</code></pre>
<p>This section is at the top level and not in the Logging section. Here is an example of a partial appsettings.json file.</p>
<pre><code>"Logging": {
    "ApplicationInsights": {
        "LogLevel": {
            "Default": "Trace"
        }
    "LogLevel": {
        "Default": "Information"
    }
},
"AllowedHosts": "*",
"ApplicationInsights": {
    "InstrumentationKey": "1a2b3c4d-5e6f-4b24-9308-4dff05f1cd02"
},
</code></pre>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.ac79c3b0.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>
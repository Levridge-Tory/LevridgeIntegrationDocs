



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>Introduction - Levridge Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.1b62728e.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#introduction" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Levridge Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Levridge Documentation
            </span>
            <span class="md-header-nav__topic">
              
                Introduction
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/Levridge-Tory/LevridgeIntegrationDocs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    levridge-tory.github.io/LevridgeIntegrationDocs
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." class="md-tabs__link md-tabs__link--active">
        Home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../Agronomy/" class="md-tabs__link">
          Products
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="Levridge Documentation" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Levridge Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/Levridge-Tory/LevridgeIntegrationDocs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    levridge-tory.github.io/LevridgeIntegrationDocs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Products
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Products
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Agronomy/" title="Agronomy" class="md-nav__link">
      Agronomy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../AgronomySales/" title="Agronomy Sales" class="md-nav__link">
      Agronomy Sales
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Commodities/" title="Commodity Accounting" class="md-nav__link">
      Commodity Accounting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Feed/" title="Feed" class="md-nav__link">
      Feed
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Patronage/" title="Equity Management" class="md-nav__link">
      Equity Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6" type="checkbox" id="nav-2-6">
    
    <label class="md-nav__link" for="nav-2-6">
      Scale
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-6">
        Scale
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Scale-Overview/" title="Scale Overview" class="md-nav__link">
      Scale Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../scale-settings-configuration/" title="Scale Settings Configuration" class="md-nav__link">
      Scale Settings Configuration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-7" type="checkbox" id="nav-2-7">
    
    <label class="md-nav__link" for="nav-2-7">
      System Information
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-7">
        System Information
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-7-1" type="checkbox" id="nav-2-7-1">
    
    <label class="md-nav__link" for="nav-2-7-1">
      Integration Framework
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-7-1">
        Integration Framework
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Integration-Overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-7-1-2" type="checkbox" id="nav-2-7-1-2">
    
    <label class="md-nav__link" for="nav-2-7-1-2">
      Integrations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-7-1-2">
        Integrations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../D365-CE-to-D365-F&O/" title="D365 CE to D365 F&O" class="md-nav__link">
      D365 CE to D365 F&O
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../D365-F&O-to-D365-CE/" title="D365 F&O to D365 CE" class="md-nav__link">
      D365 F&O to D365 CE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../scale-integration/" title="Scale" class="md-nav__link">
      Scale
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Agsync/" title="Agsync" class="md-nav__link">
      Agsync
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Kahler/" title="Kahler" class="md-nav__link">
      Kahler
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Surety/" title="Surety" class="md-nav__link">
      Surety
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../oneWeigh/" title="oneWeigh" class="md-nav__link">
      oneWeigh
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Field-Reveal/" title="Field Reveal" class="md-nav__link">
      Field Reveal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../IntegratingCustomFields/" title="Integrating Custom Fields" class="md-nav__link">
      Integrating Custom Fields
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-7-1-3" type="checkbox" id="nav-2-7-1-3">
    
    <label class="md-nav__link" for="nav-2-7-1-3">
      Deployment
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-7-1-3">
        Deployment
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Deploying-Integration-Framework/" title="Deploying the Integration Framework" class="md-nav__link">
      Deploying the Integration Framework
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ApplicationConfiguration/" title="Application Settings Configuration" class="md-nav__link">
      Application Settings Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../DeployingCustomFieldMappingAssemblies/" title="Deploying Custom Field Mapping Assemblies" class="md-nav__link">
      Deploying Custom Field Mapping Assemblies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../DeployingCDS/" title="Deploying CDS" class="md-nav__link">
      Deploying CDS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../print-service/" title="Print Service" class="md-nav__link">
      Print Service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-7-3" type="checkbox" id="nav-2-7-3">
    
    <label class="md-nav__link" for="nav-2-7-3">
      CE Platform
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-7-3">
        CE Platform
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../CE_Customization_Best_Practices/" title="CE Customization Best Practices" class="md-nav__link">
      CE Customization Best Practices
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CE_to_AX_Integration_Implementation_Checklist/" title="CE to AX Integration Implementation Checklist" class="md-nav__link">
      CE to AX Integration Implementation Checklist
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CE_Implementation_Checklist/" title="CE Implementation Checklist" class="md-nav__link">
      CE Implementation Checklist
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../CE_Setup_Records/" title="CE Setup Records" class="md-nav__link">
      CE Setup Records
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../EnvironmentPlanning/" title="Environment Planning" class="md-nav__link">
      Environment Planning
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mapping-unit-test-helper-classes" class="md-nav__link">
    Mapping Unit Test Helper Classes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#entitymapbuilderextensionstesthelper" class="md-nav__link">
    EntityMapBuilderExtensionsTestHelper
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-memberdata-to-provide-unit-test-data" class="md-nav__link">
    Using MemberData to Provide Unit Test Data
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-create-methods-to-instantiate-and-populate-the-source-and-expected-target-objects" class="md-nav__link">
    1. Create Methods to Instantiate and Populate the Source and Expected Target Objects
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-create-methods-to-instantiate-and-populate-the-source-and-target-entities" class="md-nav__link">
    2. Create Methods to Instantiate and Populate the Source and Target Entities
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-implement-the-memberdata-method" class="md-nav__link">
    3. Implement the MemberData Method
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-unit-test" class="md-nav__link">
    Example Unit Test
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/Levridge-Tory/LevridgeIntegrationDocs/edit/master/docs/Unit-Testing-Entity-Mappings.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="introduction"><a class="toclink" href="#introduction">Introduction</a></h1>
<p>This library provides the base classes and utility classes to help you bild unit tests for the integration framework.
It contains classes in the following categories:
* Mapping Unit Test Helper Classes
* Service Bus Helper and Mock classes
* Integration Test Helper Classes</p>
<h2 id="mapping-unit-test-helper-classes"><a class="toclink" href="#mapping-unit-test-helper-classes">Mapping Unit Test Helper Classes</a></h2>
<h3 id="entitymapbuilderextensionstesthelper"><a class="toclink" href="#entitymapbuilderextensionstesthelper">EntityMapBuilderExtensionsTestHelper</a></h3>
<p>The EntityMapBuilderExtensionsTestHelper class contains static methods you can use to obtain an EntityMapProvider&lt;&gt; for a particular scenario
and methods to execute A2B and B2A synchronization using the EntityMapProvider&lt;&gt;
obtained.</p>
<p>To create a unit test that can test a mapping scenario, reference this library
in your test project. Then create a unit test using the following steps:</p>
<ol>
<li>
<p>Call GetEntityMapProvider<TSource, TTarget>(Type entityMapBuilderType, string methodName) passing
the source target template parameter types as defined on the mapping method along with the class that contains
the mapping method and the name of the mapping method that you want to test.</p>
<p>For example, to test the mapping for AxEntities.ScaleTicketGradeFactor and ScaleHouseEntities.ScaleTicketGradeFactor
make the following call: </p>
<p><code>var mapProvider = EntityMapBuilderExtensionsTestHelper.GetEntityMapProvider&lt;AxEntities.ScaleTicketGradeFactor, ScaleHouseEntities.ScaleTicketGradeFactor&gt;(typeof(AxToScaleEntityMapBuilderExtensions), "MapAXScaleTicketGradeFactor_ScaleHouseScaleTicketGradeFactor");</code></p>
</li>
<li>
<p>Instantiate and populate the entities you want to use for mapping. I prefer to use the <code>[MemberData]</code> attribute to provide multiple
instances for testing. See <a href="https://andrewlock.net/creating-parameterised-tests-in-xunit-with-inlinedata-classdata-and-memberdata/">this article</a> for example on providing data for unit tests.</p>
</li>
<li>
<p>Use the EntityMapProvider&lt;&gt; to perform the mapping by calling one of the transform methods on
The EntityMapBuilderExtensionsTestHelper class. For example, to test the B2A mapping for the previous example use the following code:</p>
<p><code>AXentity = EntityMapBuilderExtensionsTestHelper.TransformB2A(mapProvider, ScaleEntity, AXentity);</code></p>
</li>
<li>
<p>Assert - check the mapped values</p>
<p>In order to test the expected values you should have an instance of the target object
with the expected values and then get the transformed object from the target entity and compare
the two. You can pass in an object with the expected values using the MemberData method.</p>
<p>Example:</p>
</li>
</ol>
<pre><code class="C#">    // Get target object
    var targetObject = AXentity.GetEntityAsDotNetType&lt;AxEntities.ScaleTicketGradeFactor&gt;();

    // Assert
    Assert.NotNull(targetObject);
    Assert.Equal(expectedResult.GradeFactorId, targetObject.GradeFactorId);
    Assert.Equal(expectedResult.GradeFactorValue, targetObject.GradeFactorValue);
    Assert.Equal(expectedResult.TicketNumber, targetObject.TicketNumber);
    Assert.Equal(expectedResult.LineNumber, targetObject.LineNumber);
</code></pre>

<h3 id="using-memberdata-to-provide-unit-test-data"><a class="toclink" href="#using-memberdata-to-provide-unit-test-data">Using MemberData to Provide Unit Test Data</a></h3>
<p>If you want to use the MemberData method for building data to use in your unit tests
(you can refer to <a href="https://andrewlock.net/creating-parameterised-tests-in-xunit-with-inlinedata-classdata-and-memberdata/">this article</a> for an over view) here are some ideas.</p>
<h4 id="1-create-methods-to-instantiate-and-populate-the-source-and-expected-target-objects"><a class="toclink" href="#1-create-methods-to-instantiate-and-populate-the-source-and-expected-target-objects">1. Create Methods to Instantiate and Populate the Source and Expected Target Objects</a></h4>
<p>I would recommend creating a private static method on your test class that recieves parameters that can be used
to initialize the class with the desired values. If you need several parameters you can put them in an object array 
or Key Value pair or even a dictionary.</p>
<p>Example:</p>
<pre><code class="C#">        private static AxEntities.ScaleTicketGradeFactor GetAxTicketGradeFactorObject(int line, string id, string value, string ticketNumber)
        {
            return new AxEntities.ScaleTicketGradeFactor()
            {
                LineNumber = line,
                GradeFactorId = id,
                GradeFactorValue = decimal.Parse(value),
                TicketNumber = ticketNumber
            };
        }
</code></pre>

<h4 id="2-create-methods-to-instantiate-and-populate-the-source-and-target-entities"><a class="toclink" href="#2-create-methods-to-instantiate-and-populate-the-source-and-target-entities">2. Create Methods to Instantiate and Populate the Source and Target Entities</a></h4>
<p>Once you have a populated source object you can use it to instantiate and initialize a source Entity.</p>
<p>Example:</p>
<pre><code class="C#">        private static Entity GetAxTicketGradeFactorEntity(AxEntities.ScaleTicketGradeFactor scaleTicketGradeFactor = null)
        {
            var axScaleTicketGradeFactor = scaleTicketGradeFactor ?? new AxEntities.ScaleTicketGradeFactor();
            Entity entity = DynamicsAxEntities.Instance.GetScaleTicketGradeFactorEntity();
            entity.CreateAndPopulateEntityFields(typeof(JSONField&lt;&gt;), axScaleTicketGradeFactor);
            return entity;
        }
</code></pre>

<p>As you can see, if an object is provided, it is used to initialize the Entity. Otherwise a default object is used.</p>
<h4 id="3-implement-the-memberdata-method"><a class="toclink" href="#3-implement-the-memberdata-method">3. Implement the MemberData Method</a></h4>
<p>As described in <a href="https://andrewlock.net/creating-parameterised-tests-in-xunit-with-inlinedata-classdata-and-memberdata/">this article</a> for an over view) the MemberData
method must return <code>IEnumerable&lt;object[]&gt;</code>. You can craete a method that uses the methods described in the previous steps
to create source &amp; target entities along with a target expected object. Then you can define that method using the <code>[MemberData]</code> attribute.</p>
<p>Here is an example MemberData method:</p>
<pre><code class="C#">        public static IEnumerable&lt;object[]&gt; GetSynchronizeA2BGradeFactorData()
        {
            return new List&lt;object[]&gt;
            {
                new object[]
                {
                    GetAxTicketGradeFactorEntity(GetAxTicketGradeFactorObject(1, &quot;A&quot;, &quot;8&quot;, &quot;0000169&quot;)),
                    GetScaleHouseGradeFactorEntity(),
                    GetScaleHouseTicketGradeFactorObject(1, &quot;A&quot;, &quot;8&quot;, &quot;0000169&quot;)
                },
                new object[]
                {
                    GetAxTicketGradeFactorEntity(GetAxTicketGradeFactorObject(2, &quot;AB&quot;, &quot;0.3&quot;, &quot;0000169&quot;)),
                    GetScaleHouseGradeFactorEntity(),
                    GetScaleHouseTicketGradeFactorObject(2, &quot;AB&quot;, &quot;0.3&quot;, &quot;0000169&quot;)
                },
                new object[]
                {
                    GetAxTicketGradeFactorEntity(GetAxTicketGradeFactorObject(3, &quot;AS&quot;, &quot;31.3&quot;, &quot;0000169&quot;)),
                    GetScaleHouseGradeFactorEntity(),
                    GetScaleHouseTicketGradeFactorObject(3, &quot;AS&quot;, &quot;31.3&quot;, &quot;0000169&quot;)
                }
            };
        }
</code></pre>

<h3 id="example-unit-test"><a class="toclink" href="#example-unit-test">Example Unit Test</a></h3>
<p>Here is an example unit test that tests Ticket Grade Factor entities from the ScaleHouse application to F&amp;O.</p>
<pre><code class="C#">        [Theory]
        [MemberData(nameof(GetSynchronizeB2AGradeFactorData))]
        public void MapScaleTicketGradeFactor_SynchronizeB2AGradeFactor_CorrectMapping(
            Entity AXentity, // AX ticket grade factor
            Entity ScaleEntity, // Scale house ticket grade factor
            AxEntities.ScaleTicketGradeFactor expectedResult)
        {
            // Arrange
            var mapProvider = EntityMapBuilderExtensionsTestHelper.GetEntityMapProvider&lt;AxEntities.ScaleTicketGradeFactor, ScaleHouseEntities.ScaleTicketGradeFactor&gt;
                (typeof(AxToScaleEntityMapBuilderExtensions), &quot;MapAXScaleTicketGradeFactor_ScaleHouseScaleTicketGradeFactor&quot;);

            //Act

            // Transform
            AXentity = EntityMapBuilderExtensionsTestHelper.TransformB2A(mapProvider, ScaleEntity, AXentity);

            // Get target object
            var targetObject = AXentity.GetEntityAsDotNetType&lt;AxEntities.ScaleTicketGradeFactor&gt;();

            // Assert
            Assert.NotNull(targetObject);
            Assert.Equal(expectedResult.GradeFactorId, targetObject.GradeFactorId);
            Assert.Equal(expectedResult.GradeFactorValue, targetObject.GradeFactorValue);
            Assert.Equal(expectedResult.TicketNumber, targetObject.TicketNumber);
            Assert.Equal(expectedResult.LineNumber, targetObject.LineNumber);

        }


</code></pre>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.808e90bb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>